// requests/create-user-invalid.bru
meta {
  name: Create User - Invalid Data
  type: http
  seq: 5
}

post {
  url: {{base_url}}/api/users
  body: json
}

body:json {
  {
    "name": "",
    "email": "invalid-email"
  }
}

tests {
  test("Should return 400 Bad Request", function() {
    expect(res.status).to.equal(400);
  });
  
  test("Should return validation errors", function() {
    expect(res.body).to.have.property('errors');
    expect(res.body.errors).to.be.an('object');
  });
  
  test("Should specify which fields are invalid", function() {
    expect(res.body.errors).to.have.property('email');
    expect(res.body.errors).to.have.property('name');
  });
}
